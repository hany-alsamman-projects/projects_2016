(function(a){a.cjMusicPlayer=function(t){function N(d){if(d.randomizeSongs){var c=[],b;for(b=0;b<i;b++)c[b]=g[b];for(g=[];0<c.length;)b=Math.random()*c.length|0,g[g.length]=c[b],c.splice(b,1)}for(b=0;b<i;b++)l[b]=g[b].url,G[b]=g[b].title?g[b].title:"";if(c=a.cjBgSlideshow.getTablet())b=a("#cj-music-controls"),b.length&&b.addClass("cj-music-fix"),b=a("#cj-music-meta"),b.length&&b.addClass("cj-music-meta-fix");if(c||a.cjBgSlideshow.getPhone())q=!1;m=a("#cj-music").css({position:"fixed",top:-50});a("<source />").attr("src", l[0]).attr("type","audio/mpeg").prependTo(m);a("<source />").attr("src",l[0].split("mp3").join("ogg")).attr("type","audio/ogg").prependTo(m);q?(m.attr("autoplay","autoplay"),u=!0):u=!1;n||m.attr("loop","loop");f=m[0];r=d.hasOwnProperty("volume")?0.01*d.volume:0.75;if(x)f.volume=r,f.addEventListener("ended",O,!1);else try{y("cj-fallback").storeVars(r,l,q)}catch(k){}q?j=!0:j=!1;!n&&h.length&&q&&h.addClass("cj-button-hover").mouseover(H).mouseout(I);o=a(".cj-music-play");p=a(".cj-music-pause");v=a(".cj-music-numbers"); z=a(".cj-current-song");A=a(".cj-music-left").data("isArrow",!0);B=a(".cj-music-right").data({isArrow:!0,isRight:!0});C=A.length&&B.length?!0:!1;J=o.length&&p.length?!0:!1;D=z.length?!0:!1;v.length?(E=!0,K=v.html()):usingtNumbers=!1;!D&&!E&&(d=a("#cj-music-controls"),d.length&&d.addClass("cj-music-controls-no-meta"));0===i&&C&&(A.css("display","none"),B.css("display","none"),C=!1);J&&!q&&(p.css("display","none"),o.css("display","inline-block"));C&&(A.click(s),B.click(s));J&&(o.click(w),p.click(w)); D&&z.html(G[e]);E&&v.html((e+1).toString()+K+i.toString());g=null}function H(d){d.stopPropagation();a(this).addClass("cj-button-hover")}function I(d){d.stopPropagation();a(this).removeClass("cj-button-hover")}function O(a){a.stopPropagation();j=!1;s(null)}function s(d){"undefined"!==typeof k&&clearInterval(k);null!==d?a(this).data("isArrow")?(d=a(this).data("isRight")?!0:!1)?e<L?e++:e=0:0<e?e--:e=L:d=!0:(e<L?e++:e=0,d=!0);if(x)f.pause(),f.currentTime=0,a.browser.msie?m.children("source").each(function(){a(this).attr("src", l[e])}):f.src=Modernizr.audio.mp3?l[e]:l[e].split("mp3").join("ogg"),f.volume=r,f.load(),f.play(),u=!0;else try{y("cj-fallback").changeSong(d)}catch(c){}D&&z.html(G[e]);E&&v.html((e+1).toString()+K+i.toString());o.css("display","none");p.css("display","inline-block");j=!0}function w(d){d&&d.stopPropagation();"undefined"!==typeof k&&clearInterval(k);if(j){n?(p.css("display","none"),o.css("display","inline-block")):h.length&&(h.unbind("mouseover",H).unbind("mouseout",I),h.addClass("cj-button-hover")); if(x)!a.browser.mozilla&&!a.browser.msie?(c=r,M(),k=setInterval(M,80)):f.pause();else try{y("cj-fallback").togglePlayPause(!1)}catch(e){}j=!1}else{n?(o.css("display","none"),p.css("display","inline-block")):h.length&&(h.removeClass("cj-button-hover"),h.mouseover(H).mouseout(I));if(x)f.play(),u&&!a.browser.mozilla&&!a.browser.msie&&(k=setInterval(P,80));else try{y("cj-fallback").togglePlayPause(!0)}catch(b){}u=j=!0}}function M(){0<c?(c-=0.05,0>c&&(c=0)):(clearInterval(k),f.pause());f.volume=c}function P(){c< r?(c+=0.05,1<c&&(c=1)):clearInterval(k);f.volume=c}function y(a){return-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]}var h=a("#cj-music-button");if(h.length&&t){var r,i,m,f,k,v,e=0,j,D,F,K,c,u,C,E,J;a(document);var g=t.songList;i=g.length;var L=i-1,G=[],l=[],A,B,o,p,z,n=1<i?!0:!1,q=t.autoPlay?!0:!1,x=Modernizr.audio?!0:!1;g&&(g.length?N(t):h.length&&h.hide());t=null;a.cjMusicPlayer.toggleMusic=function(a){"undefined"!==typeof a&&(a?j?(F=!0,w()):F=!1:F&&(F=!1,w()))};a.cjMusicPlayer.changeSong= function(a){"undefined"!==typeof a&&-1<a&&a<i&&(e=a,s(!0))};a.cjMusicPlayer.nextSong=function(){s(null)};a.cjMusicPlayer.hasMultiple=function(){n||w();return n};a.cjMusicPlayer.checkMultiple=function(){return n};a.cjMusicPlayer.flashChange=function(){j=!1;s(null)}}}})(jQuery);function cjFromFlash(){jQuery.cjMusicPlayer.flashChange()};